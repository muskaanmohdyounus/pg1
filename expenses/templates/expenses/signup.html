{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Signup | Puzzle Living PG</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- External CSS -->
    <link rel="stylesheet" href="{% static 'expenses/css/signup.css' %}">
</head>
<body>

    <div class="signup-container">
        
        <!-- LEFT SIDE (Title) -->
        <div class="signup-left">
            <h1>Puzzle Living PG</h1>
            <p>Create your Manager Account</p>
        </div>

        <!-- RIGHT SIDE (Form) -->
        <div class="signup-card">
            <h2>Manager Signup</h2>

            <form method="POST" action="">
                {% csrf_token %}
<div class="row g-3">

  <div class="col-md-6">
    <label>Full Name</label>
    <input type="text" class="form-control" name="full_name" placeholder="John Doe" required>
  </div>

  <div class="col-md-6">
    <label>Username</label>
    <input type="text" class="form-control" name="username" placeholder="johndoe123" required>
  </div>

  <div class="col-md-6">
    <label>Email</label>
    <input type="email" class="form-control" name="email" placeholder="abc@gmail.com" required>
  </div>

  <div class="col-md-6">
    <label>Phone Number</label>
    <div class="d-flex">
      <input type="text" class="form-control" name="phone" placeholder="9876543210" required>
      <button type="button" id="send-otp-btn" class="btn btn-outline-primary ms-2">Send OTP</button>
    </div>
    <small class="text-muted"></small>
  </div>

  <div class="col-md-6">
    <label>Enter OTP</label>
    <input type="text" class="form-control" name="otp" placeholder="Enter OTP" required>
  </div>

  <div class="col-md-6">
    <label>Choose PG Property</label>
    <select class="form-control" name="pg_property" required>
      <option value="" disabled selected>Select PG</option>
      <option value="Puzzle Living PG - Dream House">Puzzle Living PG - Dream House</option>
      <option value="Puzzle Living PG - Faith House">Puzzle Living PG - Faith House</option>
      <option value="Puzzle Living PG - Hope House">Puzzle Living PG - Hope House</option>
      <option value="Puzzle Living PG - Grace House">Puzzle Living PG - Grace House</option>
    </select>
  </div>

  <div class="col-md-6">
    <label>Password</label>
    <input type="password" class="form-control" name="password" placeholder="Enter password" required>
  </div>

  <div class="col-md-6">
    <label>Confirm Password</label>
    <input type="password" class="form-control" name="confirm_password" placeholder="Confirm password" required>
  </div>

</div>

<button type="submit" class="btn-submit mt-3">Create Account</button>

<p class="login-link mt-2">Already have an account? <a href="{% url 'login' %}">Login</a></p>

 </form>
</div>
</div>

</body>
<script>
document.getElementById("send-otp-btn").onclick = function() {
    const phone = document.querySelector("input[name='phone']").value;

    if (!phone) {
        alert("Please enter phone number first!");
        return;
    }

    fetch("/expenses/send-otp/?phone=" + phone)
        .then(response => response.json())
        .then(data => {
            if (data.status === "success") {
                alert("OTP Sent! Check your Django console.");
            } else {
                alert("Failed to send OTP.");
            }
        })
        .catch(error => {
            alert("Error contacting server.");
        });
};
</script>


</html>
